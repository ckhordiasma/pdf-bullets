{"version":3,"sources":["components/Tools.js","components/Bullet.js","components/BulletComparator.js","static/abbrs.xlsx","components/AbbrTable.js","components/Abbrs.js","components/Thesaurus.js","BulletApp.js","serviceWorker.js","index.js"],"names":["pdfjs","require","pdfjsWorker","GlobalWorkerOptions","workerSrc","ImportTools","props","importFile","e","fileInputRef","current","value","callback","file","console","log","state","type","getDataFromPDF","getDataFromJSON","files","inputClick","importType","setState","click","filedata","pdfSetup","arrayBuffer","then","buffer","uint8Array","Uint8Array","getDocument","data","promise","getXFA","pdf","getFormName","getMetadata","result","info","Custom","getAllData","Promise","all","pullBullets","results","formName","datasetXML","replace","xmlDoc","DOMParser","parseFromString","bulletText","Forms","tagName","querySelector","innerHTML","getPageInfo","templateXML","fonts","fontSizes","widths","i","bulletTag","getAttribute","getBulletsFromPdf","textUpdater","onTextUpdate","widthUpdater","onWidthUpdate","bulletsHTML","pageData","parseFloat","width","bullets","documentElement","textContent","reader","FileReader","onload","JSON","parse","target","onJSONImport","readAsText","hoverOut","hovering","toggleMenu","React","createRef","menuState","this","className","onChange","style","display","ref","onClick","aria-haspopup","aria-controls","icon","faAngleDown","id","role","onMouseLeave","href","PureComponent","OutputTools","widthAWD","widthEPR","widthOPR","min","max","step","onWidthChange","enableOptim","onOptimChange","InputTools","onTextNorm","SaveTools","onSave","settings","storedData","stringify","localStorage","setItem","length","err","name","alert","onExport","dataURI","encodeURIComponent","exportRef","download","Logo","ThesaurusTools","onHide","DocumentTools","aria-label","onThesaurusHide","getSelectionInfo","editorState","selectionState","getSelection","anchorKey","getAnchorKey","contentBlock","getCurrentContent","getBlockForKey","start","getStartOffset","end","getEndOffset","selectedText","getText","slice","renderBulletText","text","getWidth","match","error","fullWidth","trimEnd","textLines","lines","overflow","textSplit","split","answerIdx","join","recursedText","warn","recursedResult","avgCharWidth","guessIndex","parseInt","firstGuessWidth","substring","tokenize","sentence","STATUS","OPTIMIZED","FAILED_OPT","NOT_OPT","Bullet","widthPx","height","onHighlight","canvasRef","useRef","useState","outputTextLines","setOutputTextLines","color","setColor","loading","setLoading","optimStatus","setOptimStatus","rendering","setBulletRendering","getTextWidth","txt","canvas","context","getContext","font","textAlign","measureText","useEffect","optimResults","evalFcn","smallerSpace","largerSpace","optWords","initResults","prevResults","finalResults","newSpace","finalOptimStatus","hashCode","str","hash","charCodeAt","getRandomInt","seed","Math","floor","abs","worstCaseResults","MAX_UNDERFLOW","status","iReplace","splice","newResults","optimize","visibility","position","top","left","minHeight","flexDirection","onMouseUp","map","line","whiteSpace","BulletComparator","setEditorState","onSelect","abbrReplacer","bulletOutputID","Map","heightMap","setHeightMap","newHeightMap","getBlockMap","keys","key","blockDiv","document","set","getBoundingClientRect","newEditorState","handleKeyCommand","command","newState","RichUtils","event","selection","window","toString","onKeyDown","ctrlKey","keyCode","preventDefault","RegExp","range","createRange","selectNode","removeAllRanges","addRange","tabIndex","Array","from","DPI","get","testTagRenderer","instance","td","row","col","prop","cellProperties","Handsontable","renderers","CheckboxRenderer","apply","arguments","TextRenderer","setAttribute","tableSettings","columns","disableVisualSelection","renderer","stretchH","autoWrapRow","maxRows","Infinity","manualRowResize","manualColumnResize","rowHeaders","colHeaders","trimWhitespace","enterBeginsEditing","manualRowMove","manualColumnMove","columnSorting","indicator","autoColumnSize","minRows","contextMenu","licenseKey","search","queryMethod","queryStr","DEFAULT_CALLBACK","testResult","getCellMeta","isSearchResult","AbbrTable","setData","tableRef","afterChange","payload","source","newData","hotInstance","getData","enabled","abbr","AbbrTools","getDataFromXLS","workbook","XLSX","read","raw","rows","utils","sheet_to_json","Sheets","SheetNames","readAsBinaryString","wb","book_new","sht","json_to_sheet","book_append_sheet","writeFile","confirm","res","xhttp","XMLHttpRequest","responseType","response","open","SampleAbbrFile","send","AbbrsViewer","handleCardClick","word","This","onSelReplace","SynonymViewer","getSynonyms","phrase","onreadystatechange","readyState","dat","responseText","synonyms","item","hidden","prevProps","mainBody","replacedWord","otherAbbrs","abbrDict","header","onMouseDown","faPlus","size","explanation","noResults","SynonymList","Synonym","mainAbbrDisp","fontWeight","enabledAbbrDisp","disabledAbbrDisp","enabledAbbrs","filter","fontStyle","disabled","disabledAbbrs","defaultAbbrData","defaultEditorState","EditorState","createWithContent","ContentState","createFromText","BulletApp","setEnableOptim","setWidth","abbrData","setAbbrData","setAbbrDict","setSelection","currentTab","setCurrentTab","showThesaurus","setShowThesaurus","handleJSONImport","settingsArray","isArray","fromJS","getItem","newAbbrDict","forEach","fullWord","String","push","useCallback","finalAbbrDict","Object","abbrs","allApprovedAbbrs","string","regExp","p1","p2","p3","handleThesaurusHide","tabContents","newSel","trim","Abbrs","newWidth","selectionsToReplace","contentState","block","regex","matchArr","exec","index","findWithRegex","anchorOffset","focusOffset","SelectionState","createEmpty","merge","newContentState","reverse","Modifier","replaceText","newText","getPlainText","toJS","activeElement","trailingSpaces","newEnd","newSelectionState","newContent","newEditorStateSelect","forceSelection","tab","newTab","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","WebFont","load","custom","families","ReactDOM","render","getElementById","xh","DONE","count","Count","incrementVisitors","URL","process","origin","addEventListener","fetch","headers","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.3a738064.chunk.js","sourcesContent":["import React from \"react\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown } from \"@fortawesome/free-solid-svg-icons\"\n\nconst pdfjs = require('@ckhordiasma/pdfjs-dist');\nconst pdfjsWorker = require('@ckhordiasma/pdfjs-dist/build/pdf.worker.entry');\npdfjs.GlobalWorkerOptions.workerSrc = pdfjsWorker;\n\n//PDF import\nclass ImportTools extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.fileInputRef = React.createRef();\n        this.state = {\n            type: 'none',\n            hovering: false,\n        }\n    }\n\n    importFile = (e) => {\n        if (!this.fileInputRef.current.value) {\n            console.log('no file picked');\n            return;\n        } else {\n            let callback = (file) => { console.log(file) };\n            if (this.state.type === 'PDF') {\n                callback = this.getDataFromPDF;\n            } else if (this.state.type === 'JSON') {\n                callback = this.getDataFromJSON;\n            }\n            //return Promise.resolve(this.fileInputRef.current.files[0]).then(callback).then(() => {\n            //    this.fileInputRef.current.value = ''});\n            callback(this.fileInputRef.current.files[0]);\n            this.fileInputRef.current.value = '';\n        }\n    }\n    inputClick = (importType) => {\n        return () => {\n            this.setState({\n                type: importType,\n            });\n            this.fileInputRef.current.click();\n        };\n    }\n    getDataFromPDF = (file) => {\n        const { pullBullets, getPageInfo } = getBulletsFromPdf(file);\n        //note: these promises are PDFJS promises, not ES promises\n\n        //was not able to call this (this.props.onTextUpdate) inside the \"then\" scope, so I const'ed them out\n        const textUpdater = this.props.onTextUpdate;\n        const widthUpdater = this.props.onWidthUpdate;\n\n        Promise.all([pullBullets, getPageInfo]).then(([bulletsHTML, pageData]) => {\n            widthUpdater(parseFloat(pageData.width))();\n\n            // This is needed to convert the bullets HTML into normal text. It gets rid of things like &amp;\n            const bullets =\n                new DOMParser().parseFromString(bulletsHTML, 'text/html').documentElement.textContent;\n            textUpdater(bullets)();\n        });\n\n    }\n    getDataFromJSON = (file) => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n\n            const data = JSON.parse(e.target.result);\n\n            this.props.onJSONImport(data);\n        };\n        reader.readAsText(file)\n    }\n\n    hoverOut = () => {\n        this.setState({ hovering: false });\n    }\n    toggleMenu = () => {\n        const current = this.state.hovering;\n        this.setState({ hovering: !current });\n    }\n    render() {\n        const menuState = this.state.hovering ? \"is-active\" : \"\";\n        return (\n            <div className={\"dropdown \" + menuState}>\n                <input type=\"file\" onChange={this.importFile} style={{ display: \"none\" }} ref={this.fileInputRef}></input>\n                <div className=\"dropdown-trigger\">\n                    <div className=\"buttons has-addons\">\n                        <button className=\"button\" onClick={this.inputClick('PDF')}>Import</button>\n                        <button className=\"button\" onClick={this.toggleMenu} aria-haspopup=\"true\" aria-controls=\"import-menu\" >\n                            <span className=\"icon\">\n\n                                <FontAwesomeIcon icon={faAngleDown} />\n                            </span>\n                        </button>\n                    </div>\n                </div>\n                <div className=\"dropdown-menu\" id=\"import-menu\" role=\"menu\" onMouseLeave={this.hoverOut}>\n                    <div className=\"dropdown-content\">\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.inputClick('PDF')}>PDF</a>\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.inputClick('JSON')}>JSON</a>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n// form width, space optimization, select text\nclass OutputTools extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n\n        }\n    }\n    render() {\n        const widthAWD = 202.321;\n        const widthEPR = 202.321;\n        const widthOPR = 201.041;\n        return (\n            <div className=\"field is-grouped\">\n                {/* if I want to group things together in a field, each subelement must have the control class name */}\n                <div className=\"control field has-addons\">\n                    <div className=\"control has-icons-right\">\n                        <input className=\"input\" id=\"widthInput\" type='number' min=\"100\" max=\"500\" step=\".001\" value={this.props.width} onChange={this.props.onWidthChange}></input>\n                        <span className='icon is-right'>mm</span>\n                    </div>\n                    <div className=\"control buttons has-addons\">\n                        <a  className={\"button is-primary \"  + (this.props.width === widthAWD ? '' : 'is-outlined')}\n                            onClick={this.props.onWidthUpdate(widthAWD)}>AWD</a>\n                        <a className={\"button is-success \"  + (this.props.width === widthEPR ? '' : 'is-outlined')}\n                            onClick={this.props.onWidthUpdate(widthEPR)}>EPR</a>\n                        <a  className={\"button is-link \" + (this.props.width === widthOPR ? '' : 'is-outlined')}\n                            onClick={this.props.onWidthUpdate(widthOPR)}>OPR</a>\n                    </div>\n\n                </div>\n\n                <a  className={\"control button is-dark\" + (this.props.enableOptim ? '' : \"is-outlined\")}\n                    onClick={this.props.onOptimChange} id=\"enableOptim\">Auto-Space</a>\n            </div>\n        );\n    }\n}\n// normalize spaces\nclass InputTools extends React.PureComponent {\n\n    render() {\n        return (\n            <button className=\"button\" onClick={this.props.onTextNorm}>Renormalize Input Spacing</button>\n        );\n    }\n}\n// saving settings\nclass SaveTools extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.exportRef = React.createRef();\n        this.state = { hovering: false };\n    }\n    onSave = () => {\n        const settings = this.props.onSave();\n        //JSON stringifying an array for future growth\n        const storedData = JSON.stringify([settings]);\n        try {\n            localStorage.setItem('bullet-settings', storedData);\n            console.log(\"saved settings/data to local storage with character length \" + storedData.length);\n        } catch (err) {\n            if (err.name === 'SecurityError') {\n                alert(\"Sorry, saving to cookies does not work using the file:// interface and/or your browser's privacy settings\")\n            } else {\n                throw err;\n            }\n        }\n    }\n    onExport = () => {\n        const settings = this.props.onSave();\n        //JSON stringifying an array for future growth\n        const storedData = JSON.stringify([settings]);\n        const dataURI = 'data:application/JSON;charset=utf-8,' + encodeURIComponent(storedData);\n        this.exportRef.current.href = dataURI;\n        this.exportRef.current.click();\n        console.log(\"exported settings/data to JSON file with character length \" + storedData.length);\n\n    }\n    hoverOut = () => {\n        this.setState({ hovering: false });\n    }\n    toggleMenu = () => {\n        const current = this.state.hovering;\n        this.setState({ hovering: !current });\n    }\n    render() {\n        const menuState = this.state.hovering ? \"is-active\" : \"\";\n        return (\n            <div className={'dropdown ' + menuState}>\n                <div className=\"dropdown-trigger\">\n                    <div className=\"buttons has-addons\">\n                        <button className=\"button\" onClick={this.onSave}>Save </button>\n                        <button className=\"button\" aria-haspopup=\"true\" aria-controls=\"save-menu\" >\n                            <span className=\"icon\" onClick={this.toggleMenu} >\n                                <FontAwesomeIcon icon={faAngleDown} />\n                            </span>\n                        </button>\n                    </div>\n                </div>\n                <div className=\"dropdown-menu\" id=\"save-menu\" role=\"menu\" onMouseLeave={this.hoverOut}>\n                    <div className=\"dropdown-content\">\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.onSave}>Cookie</a>\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.onExport}>JSON</a>\n                    </div>\n                </div>\n\n                <a href=\"?#\" style={{ display: \"none\" }} download='settings.json' ref={this.exportRef}></a>\n            </div>\n        );\n    }\n}\nclass Logo extends React.PureComponent {\n    render() {\n        return (\n            <h1 className='title'><span className=\"logo\">AF </span>\n                <span className=\"logo\">Bull</span>et\n                <span className=\"logo\"> Sh</span>aping &amp;\n                <span className=\"logo\"> i</span>teration\n                <span className=\"logo\"> t</span>ool\n            </h1>\n        );\n    }\n}\nclass ThesaurusTools extends React.PureComponent {\n    render() {\n        return (\n            <a  className=\"button\" onClick={this.props.onHide} aria-haspopup=\"true\" aria-controls=\"thesaurus-menu\" >\n                <span>Thesaurus</span><span className=\"icon\"  >\n                    <FontAwesomeIcon icon={faAngleDown} />\n                </span>\n            </a>\n        );\n    }\n}\nclass DocumentTools extends React.PureComponent {\n    render() {\n        return (\n            <nav className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n                <div className=\"navbar-start\">\n                    <div className=\"navbar-item\">\n                        <SaveTools onSave={this.props.onSave} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <ImportTools onJSONImport={this.props.onJSONImport} onTextUpdate={this.props.onTextUpdate} onWidthUpdate={this.props.onWidthUpdate} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <OutputTools\n                            enableOptim={this.props.enableOptim} onOptimChange={this.props.onOptimChange}\n                            width={this.props.width} onWidthChange={this.props.onWidthChange}\n                            onWidthUpdate={this.props.onWidthUpdate} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <InputTools onTextNorm={this.props.onTextNorm} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <ThesaurusTools onHide={this.props.onThesaurusHide} />\n                    </div>\n                </div>\n            </nav>\n        );\n    }\n}\n\n// could not do a static class property because of MS edge\nconst Forms = {\n    all: {\n        'AF707': {\n            'fields': ['S2DutyTitleDesc', 'S4Assessment', 'S5Assessment', 'S6Assessment'],\n            'likelyWidth': '201.041mm'\n        },\n        'AF1206': {\n            'fields': ['specificAccomplishments', 'p2SpecificAccomplishments'],\n            'likelyWidth': '202.321mm'\n        },\n        'AF910': {\n            'fields': ['KeyDuties', 'IIIComments', 'IVComments', 'VComments', 'VIIIComments', 'IXComments'],\n            'likelyWidth': '202.321mm'\n        },\n        'AF911': {\n            'fields': ['KeyDuties', 'IIIComments', 'IVComments', 'VIIComments', 'VIIIComments', 'IXComments'],\n            'likelyWidth': '202.321mm'\n        },\n    }\n};\nfunction getBulletsFromPdf(filedata) {\n\n\n    const pdfSetup = filedata.arrayBuffer().then(function (buffer) {\n        const uint8Array = new Uint8Array(buffer);\n\n        return pdfjs.getDocument({ data: uint8Array }).promise;\n\n    });\n\n    const getXFA = pdfSetup.then(function (pdf) {\n        return pdf.getXFA();\n    });\n\n    const getFormName = pdfSetup.then(function (pdf) {\n        return pdf.getMetadata().then(function (result) {\n            const prefix = result.info.Custom[\"Short Title - Prefix\"];\n            const num = result.info.Custom[\"Short Title - Number\"];\n            return prefix + '' + num;\n        })\n    });\n    const getAllData = Promise.all([getFormName, getXFA]);\n    const pullBullets = getAllData.then(function (results) {\n\n        const formName = results[0];\n        const xfaDict = results[1];\n\n        let datasetXML = xfaDict['datasets'];\n        datasetXML = datasetXML.replace(/&#xD;/g, '\\n');\n\n        const parser = new DOMParser();\n        const xmlDoc = parser.parseFromString(datasetXML, \"text/xml\");\n\n        let bulletText = '';\n        for (let tagName of Forms.all[formName]['fields']) {\n            const bulletTag = xmlDoc.querySelector(tagName);\n            bulletText += bulletTag.innerHTML + '\\n';\n        }\n        return bulletText;\n    });\n\n    const getPageInfo = getAllData.then(function (results) {\n\n        const formName = results[0];\n        const xfaDict = results[1];\n\n        const templateXML = xfaDict['template'];\n        const parser = new DOMParser();\n        const xmlDoc = parser.parseFromString(templateXML, \"text/xml\");\n\n        let fonts = [];\n        let fontSizes = []\n        let widths = [];\n        let i = 0;\n        for (let tagName of Forms.all[formName]['fields']) {\n            const bulletTag = xmlDoc.querySelector(\"field[name='\" + tagName + \"'\");\n            fonts[i] = bulletTag.querySelector('font').getAttribute('typeface');\n            fontSizes[i] = bulletTag.querySelector('font').getAttribute('size');\n            widths[i] = bulletTag.getAttribute('w');\n            i += 1;\n        }\n        for (let font of fonts) {\n            if (font !== fonts[0]) {\n                console.log('warning: not all grabbed sections have the same font type');\n                break;\n            }\n        }\n        for (let fontSize of fontSizes) {\n            if (fontSize !== fontSizes[0]) {\n                console.log('warning: not all grabbed sections have the same font size');\n                break;\n            }\n        }\n        for (let width of widths) {\n            if (width !== widths[0]) {\n                console.log('warning: not all grabbed sections have the same width');\n                break;\n            }\n        }\n\n        return { 'font': fonts[0], 'fontSize': fontSizes[0], 'width': widths[0] }\n\n        //accomplishmentsTag = templateXML.match(/name=\"specificAccomplishments\"(.*?)<\\/field/);\n        //console.log(accomplishmentsTag)\n    });\n    return { pullBullets, getPageInfo };\n}\n\nfunction getSelectionInfo(editorState) {\n    // this block of code gets the selected text from the editor.\n    const selectionState = editorState.getSelection();\n    const anchorKey = selectionState.getAnchorKey();\n    const contentBlock = editorState.getCurrentContent().getBlockForKey(anchorKey);\n    const start = selectionState.getStartOffset();\n    const end = selectionState.getEndOffset();\n    const selectedText = contentBlock.getText().slice(start, end);\n    return {\n        selectionState,\n        anchorKey,\n        contentBlock,\n        start,\n        end,\n        selectedText,\n    }\n}\n\nconst findWithRegex = (regex, contentBlock, callback) => {\n    const text = contentBlock.getText();\n    let matchArr, start, end;\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index;\n        end = start + matchArr[0].length;\n        callback(start, end);\n    }\n};\n\n\n// all widths in this function are in pixels\nfunction renderBulletText(text, getWidth, width) {\n    \n    width = width + 0.55;\n    // this function expects a single line of text with no line breaks.\n    if(text.match('\\n')){\n        console.error('renderBulletText expects a single line of text');\n    }\n    \n    const fullWidth = getWidth(text.trimEnd());\n\n    if (fullWidth < width) {\n        return {\n            textLines: [text],\n            fullWidth: fullWidth,\n            lines: 1,\n            overflow: fullWidth - width,\n        };\n    } else {\n        // Scenario where the width of the text is wider than desired.\n        //  In this case, work needs to be done to figure out where the line breaks should be. \n\n        // Regex- split after one of the following: \\u2004 \\u2009 \\u2006 \\s ? / | - % ! \n        // but ONLY if immediately followed by: [a-zA-z] [0-9] + \\\n        const textSplit = text.split(/(?<=[\\u2004\\u2009\\u2006\\s?/|\\-%!])(?=[a-zA-Z0-9+\\\\])/);\n\n        // check to make sure the first token is smaller than the desired width.\n        //   This is usually true, unless the desired width is abnormally small, or the \n        //   input text is one really long word\n        if (getWidth(textSplit[0]) < width) {\n            let answerIdx = 0;\n            for (let i = 1; i <= textSplit.length; i++) {\n                const evalText = textSplit.slice(0, i).join('').trimEnd();\n                const evalWidth = getWidth(evalText);\n                if (evalWidth > width) {\n                    answerIdx = i - 1;\n                    break;\n                }\n            }\n            const recursedText = textSplit.slice(answerIdx, textSplit.length).join('');\n\n            if (recursedText === text) {\n                console.warn(\"Can't fit \\\"\" + text + \"\\\" on a single line\\n\", {text, width, fullWidth});\n                return {\n                    textLines: [text],\n                    fullWidth,\n                    lines: 1,\n                    overflow: fullWidth - width,\n                };\n            } else {\n                const recursedResult = renderBulletText(recursedText, getWidth, width);\n\n                return {\n                    textLines: [textSplit.slice(0, answerIdx).join(''), ...recursedResult.textLines],\n                    fullWidth: fullWidth,\n                    lines: 1 + recursedResult.lines,\n                    overflow: fullWidth - width,\n                }\n            }\n\n        } else {\n\n            const avgCharWidth = fullWidth / (text.length);\n            const guessIndex = parseInt(width / avgCharWidth);\n            const firstGuessWidth = getWidth(text.substring(0, guessIndex))\n            let answerIdx = guessIndex;\n            if (firstGuessWidth > width) {\n                for (let i = guessIndex - 1; i > 0; i--) {\n                    const nextGuessWidth = getWidth(text.substring(0, i));\n                    if (nextGuessWidth < width) {\n                        answerIdx = i;\n                        break;\n                    }\n                }\n            } else if (firstGuessWidth < width) {\n                for (let i = guessIndex; i <= text.length; i++) {\n\n                    const nextGuessWidth = getWidth(text.substring(0, i));\n                    if (nextGuessWidth > width) {\n                        answerIdx = i - 1;\n                        break;\n                    }\n                }\n            }\n            const recursedText = text.substring(answerIdx, text.length);\n            if (recursedText === text) {\n                console.warn(\"Can't fit \\\"\" + text + \"\\\" on a single line\\n\", {text, width, fullWidth});\n                return {\n                    textLines: [text],\n                    fullWidth,\n                    lines: 1,\n                    overflow: fullWidth - width\n                };\n            } else {\n                const recursedResult = renderBulletText(recursedText, getWidth, width);\n\n                return {\n                    textLines: [text.substring(0, answerIdx), ...recursedResult.textLines],\n                    fullWidth: fullWidth,\n                    lines: 1 + recursedResult.lines,\n                    overflow: fullWidth - width,\n                }\n            }\n        }\n    }\n}\n\nfunction tokenize (sentence) {\n    return sentence.split(/[\\s]+/);\n}\n\nexport { Logo, DocumentTools, getSelectionInfo, findWithRegex, renderBulletText, tokenize };\n","import React from \"react\"\nimport { renderBulletText, tokenize } from './Tools.js'\n\n// optimization status codes\n// status codes for optimization direction \nconst STATUS = {\n    OPTIMIZED: 0,\n    FAILED_OPT: 1,\n    NOT_OPT: -1,\n}\n\nconst MAX_UNDERFLOW = -4;\n\nfunction Bullet({ text=\"\", widthPx=500, enableOptim=false, height, onHighlight }) {\n    const canvasRef = React.useRef(null);\n    const [outputTextLines, setOutputTextLines] = React.useState(() => [' ']);\n\n    const [color, setColor] = React.useState('inherit');\n    const [loading, setLoading] = React.useState(false);\n    const [optimStatus, setOptimStatus] = React.useState(STATUS.NOT_OPT);\n    const [rendering, setBulletRendering] = React.useState({ textLines: [''] });\n\n    function getTextWidth(txt, canvas){\n        const context = canvas.getContext('2d');\n        context.font = '12pt Times New Roman';\n        context.textAlign = 'left';\n        return (context.measureText(txt).width);\n     }\n\n    // This effect updates the text rendering (i.e. enforces width constraints by inserting newlines)\n    //   whenever the props text input is updated.\n    React.useEffect(() => {\n        \n        setBulletRendering(renderBulletText(text, (txt) => getTextWidth(txt,canvasRef.current), widthPx));\n\n    }, [text, widthPx, enableOptim]);\n    // [] indicates that this happens once after the component mounts.\n    // [text] indicates that this happens every time the text changes from the user (from props)\n\n    // This effect happens after bullet rendering changes. It evaluates the rendered bullet and\n    //  sees how it can be improved with modified spaces. \n    React.useEffect(() => {\n\n        setLoading(true);\n        setOutputTextLines(rendering.textLines);\n        if (enableOptim) {\n            const optimizer = (txt) => renderBulletText(txt, (txt) => getTextWidth(txt, canvasRef.current), widthPx);\n            const optimResults = optimize(text, optimizer);\n            setLoading(false);\n            setOptimStatus(optimResults.status);\n            setOutputTextLines(optimResults.rendering.textLines);\n            \n        } else {\n            if(rendering.overflow < MAX_UNDERFLOW || rendering.overflow > 0){\n                setOptimStatus(STATUS.FAILED_OPT);\n            }else{\n                setOptimStatus(STATUS.OPTIMIZED)\n            }\n            setOutputTextLines(rendering.textLines);\n            setLoading(false);\n        }\n\n    }, [rendering, enableOptim, text, widthPx]);\n\n    //color effect\n    React.useEffect(() => {\n        if (loading) {\n            setColor(\"silver\")\n        } else if (optimStatus === STATUS.FAILED_OPT) {\n            setColor(\"red\");\n        } else {\n            setColor(\"black\");\n        }\n    }, [loading, outputTextLines, optimStatus])\n\n    // the style properties help lock the canvas in the same spot and make it essentially invisible.\n    //whitespace: pre-wrap is essential as it allows javascript string line breaks to appear properly.\n    return (\n        <>\n            <canvas\n                ref={canvasRef}\n                style={{\n                    visibility: \"hidden\",\n                    position: \"absolute\",\n                    top: \"-1000px\",\n                    left: \"-1000px\"\n                }} />\n            <div style={{\n                minHeight: height,\n                color: color,\n                display:'flex',\n                flexDirection:'column',\n            }} onMouseUp={onHighlight} >\n                {outputTextLines.map((line)=>{\n                    return <span key={line} style={{whiteSpace:\"pre\"}}>{line}</span>;\n                })}\n            </div>\n        </>\n    );\n    //return canvas;\n}\n\n\nfunction optimize(sentence, evalFcn) {\n\n    const smallerSpace = \"\\u2006\";\n    const largerSpace = \"\\u2004\";\n\n    //initialization of optimized words array\n    let optWords = tokenize(sentence.trimEnd());\n\n    const initResults = evalFcn(sentence);\n\n    if (initResults.overflow === 0) {\n        return initResults;\n    }\n\n    //initial instantiation of previousResults\n    let prevResults = initResults;\n    let finalResults = initResults;\n    const newSpace = (initResults.overflow >= 0) ? smallerSpace : largerSpace;\n\n    let finalOptimStatus = STATUS.NOT_OPT;\n\n    function hashCode (str) {\n        let hash = 0, i, chr;\n        if (str.length === 0) return hash;\n        for (i = 0; i < str.length; i++) {\n          chr = str.charCodeAt(i);\n          hash = ((hash << 5) - hash) + chr;\n          hash |= 0; // Convert to 32bit integer\n        }\n        return hash;\n      };\n\n    function getRandomInt(seed, max) {\n        return Math.floor(Math.abs((Math.floor(9 * hashCode(seed) + 5) % 100000) / 100000) * Math.floor(max));\n    }\n\n    // like in the while loop, want to not replace the first space after the dash.\n    const worstCaseResults = evalFcn(optWords[0] + ' ' + optWords.slice(1).join(newSpace));\n\n    if( (newSpace === smallerSpace && worstCaseResults.overflow > 0) || \n            (newSpace === largerSpace && worstCaseResults.overflow < STATUS.MAX_UNDERFLOW) ){\n            // this means that there is no point in trying to optimize.\n            \n            return {\n                status: STATUS.FAILED_OPT,\n                rendering: worstCaseResults,\n            };\n        \n    }\n\n    while (finalResults.overflow > 0 || finalResults.overflow < STATUS.MAX_UNDERFLOW) {\n        //don't select the first space after the dash- that would be noticeable and look wierd.\n        // also don't select the last word, don't want to add a space after that.\n        let iReplace = getRandomInt(optWords.join(''), optWords.length - 1 - 1) + 1;\n\n        //merges two elements together, joined by the space\n        optWords.splice(\n            iReplace, 2,\n            optWords.slice(iReplace, iReplace + 2).join(newSpace)\n        );\n\n        //make all other spaces the normal space size\n        let newSentence = optWords.join(' ');\n\n        let newResults = evalFcn(newSentence);\n\n        if (initResults.overflow <= 0 && newResults.overflow > 0) {\n            //console.log(\"Note: Can't add more spaces without overflow, reverting to previous\" );\n            finalResults = prevResults;\n            finalOptimStatus = STATUS.OPTIMIZED;\n            break;\n        } else if (initResults.overflow > 0 && newResults.overflow < 0) {\n            //console.log(\"Removed enough spaces. Terminating.\" );\n            finalResults = newResults;\n            finalOptimStatus = STATUS.OPTIMIZED;\n            break;\n        }\n        \n        prevResults = newResults;\n    }\n    return {\n        status: finalOptimStatus,\n        rendering: finalResults,\n    };\n}\n\n\nexport default Bullet;","import React from \"react\"\nimport { Editor,  RichUtils } from \"draft-js\"\nimport \"draft-js/dist/Draft.css\";\nimport { getSelectionInfo } from './Tools.js'\nimport Bullet from './Bullet.js'\n\nconst DPI = 96;\nconst MM_PER_IN = 25.4;\nconst DPMM = DPI / MM_PER_IN;\n\nfunction BulletComparator({editorState, setEditorState, width, onSelect, abbrReplacer, enableOptim }) {\n    \n    const bulletOutputID = \"bulletOutput\";\n    const [heightMap, setHeightMap] = React.useState(new Map());\n    // Editor callback that adds rich text editor keybinds\n    const handleKeyCommand = (command, editorState) => {\n        const newState = RichUtils.handleKeyCommand(editorState, command);\n        if (newState) {\n            setEditorState(newState);\n            return 'handled';\n        }\n        return 'not-handled';\n    }\n\n    // Editor callback that runs whenever edits or selection changes occur.\n    const onChange = (newEditorState) => {\n\n        //const content = editorState.getCurrentContent();\n        // ordered map has a key and a block associasted with it\n        //const blockMap = content.getBlockMap();\n        /*\n        for(let [key,block] of blockMap){\n            console.log(block.getText());\n        }\n        */\n        const { selectedText } = getSelectionInfo(newEditorState)\n        if (onSelect && selectedText !== '') onSelect(selectedText);\n        \n        setEditorState(newEditorState);\n    }\n\n    // This other bullet selection is for when things are selected on the optimized output\n    const onBulletSelect = (event) => {\n        const selection = window.getSelection().toString();\n        if (selection !== \"\") {\n            onSelect(selection)\n        }\n    }\n\n    // control-a selectability on bullet outputs\n    function selectOutput(e) {\n        if (e.ctrlKey && e.keyCode === 65) {\n            e.preventDefault();\n            //console.log('control-a')\n            //console.log(this.outputRef.current)\n            if (e.target.id.match(new RegExp(bulletOutputID))) {\n                const range = document.createRange();\n                range.selectNode(e.target);\n                window.getSelection().removeAllRanges();\n                window.getSelection().addRange(range);\n            }\n        }\n    }\n\n    React.useEffect(()=>{\n        let newHeightMap = new Map();\n        for(let key of editorState.getCurrentContent().getBlockMap().keys()){\n            const blockDiv = document.querySelector(`div[data-offset-key=\"${key}-0-0\"]`);\n            if(blockDiv) newHeightMap.set(key, blockDiv.getBoundingClientRect().height);\n        };\n        setHeightMap(newHeightMap);\n    },[editorState])\n\n    return (\n        <div className=\"bullets columns is-multiline\" >\n            <div className=\"column\" style={{\n                // width: width + 'mm',\n            }}>\n                <h2 className='subtitle'>Input Bullets Here:</h2>\n                <div className=\"border\" style={{ width: (width+1) + 'mm'}}>\n                    <Editor \n                        editorState={editorState} onChange={onChange} handleKeyCommand={handleKeyCommand} />\n                </div>\n            </div>\n            <div className=\"column\" >\n                <h2 className='subtitle'>View Output Here:</h2>\n                <div className=\"border\" id={bulletOutputID} style={{ width: (width+1) + 'mm' }}\n                    onMouseUp={onBulletSelect} onKeyDown={selectOutput} tabIndex=\"0\">\n                    {Array.from(editorState.getCurrentContent().getBlockMap(), ([key, block]) => {\n                        let text = block.getText();\n                        if (abbrReplacer) text = abbrReplacer(text);\n                        \n                        return <Bullet key={key} text={text} widthPx={ width * DPMM } height={heightMap.get(key)} \n                            enableOptim={enableOptim} />\n                    })}\n                </div>\n            </div>\n        </div>);\n}\n\nexport default BulletComparator;","export default __webpack_public_path__ + \"static/media/abbrs.ebd0e99b.xlsx\";","import React from 'react';\nimport { HotTable } from '@handsontable/react';\nimport Handsontable from 'handsontable';\nimport 'handsontable/dist/handsontable.full.css';\n\nconst testTagRenderer = function(instance, td, row, col, prop, value, cellProperties){\n    \n    if(cellProperties.prop === 'enabled'){\n        Handsontable.renderers.CheckboxRenderer.apply(this,arguments);\n    } else{\n        Handsontable.renderers.TextRenderer.apply(this, arguments);\n    }\n    //console.log(row)\n    //console.log({instance, cellProperties})\n    td.setAttribute(\"data-testid\", cellProperties.prop + '-' + row);\n    \n}\n\nconst tableSettings = {\n    columns: [{\n      data: 'enabled',\n      type: 'checkbox',\n      disableVisualSelection: true,\n      width: 20,\n      renderer: testTagRenderer,\n    }, {\n      data: 'value',\n      type: 'text',\n      renderer: testTagRenderer,\n    }, {\n      data: 'abbr',\n      type: 'text',\n      renderer: testTagRenderer,\n    },\n    ],\n    stretchH: 'all',\n    width: 500,\n    autoWrapRow: true,\n    height: 500,\n    maxRows: Infinity,\n    manualRowResize: true,\n    manualColumnResize: true,\n    rowHeaders: true,\n    colHeaders: [\n      'Enabled',\n      'Word',\n      'Abbreviation',\n    ],\n    trimWhitespace: false,\n    enterBeginsEditing: false,\n    manualRowMove: true,\n    manualColumnMove: true,\n    columnSorting: {\n      indicator: true\n    },\n    autoColumnSize: false,\n    minRows: 15,\n    contextMenu: true,\n    licenseKey: 'non-commercial-and-evaluation',\n    search: {\n      queryMethod: function (queryStr, value) {\n        return queryStr.toString() === value.toString();\n      },\n      callback: function (instance, row, col, value, result) {\n        const DEFAULT_CALLBACK = function (instance, row, col, data, testResult) {\n          instance.getCellMeta(row, col).isSearchResult = testResult;\n        };\n  \n        DEFAULT_CALLBACK.apply(this, arguments);\n      },\n    },\n  };\n\nfunction AbbrTable({data, setData}){\n    const tableRef = React.useRef(null)\n    \n    const update = (payload, source)=>{    \n        console.log({source, payload, tableRef: tableRef.current , data})\n\n        if(source !== 'loadData' && tableRef.current !== null){\n            const rawData = tableRef.current.hotInstance.getData();\n            const newData = rawData.map((row)=>{ \n                return {\n                    enabled: row[0],\n                    value: row[1],\n                    abbr: row[2]\n                }\n             });\n            setData(newData)\n        }\n    }\n\n    return (<HotTable {...tableSettings}\n        data={data}\n        ref={tableRef}\n        afterChange={update}\n    />)\n}\n\nexport default AbbrTable;\n","import React from \"react\"\nimport XLSX from \"xlsx\"\nimport SampleAbbrFile from '../static/abbrs.xlsx'\nimport AbbrTable from './AbbrTable.js'\n\n\nfunction AbbrTools({ data, setData, ...props}) {\n\n    const fileInputRef = React.createRef();\n    function importSampleAbbrs() {\n        return new Promise((res) => {\n            const xhttp = new XMLHttpRequest();\n            xhttp.responseType = 'blob';\n            xhttp.onload = () => {\n                res(xhttp.response);\n            }\n            xhttp.open('GET', SampleAbbrFile, true);\n            xhttp.send();\n        }).then(getDataFromXLS);\n    }\n    function importAbbrs(e) {\n\n        if (!fileInputRef.current.value) {\n            console.log('no file picked');\n            return;\n        } else {\n            getDataFromXLS(fileInputRef.current.files[0]);\n            fileInputRef.current.value = '';\n        }\n\n    }\n    function getDataFromXLS(file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const data = e.target.result;\n            const workbook = XLSX.read(data, {\n                type: 'binary',\n                raw: true,\n            });\n            const rows = XLSX.utils.sheet_to_json(\n                workbook.Sheets[workbook.SheetNames[0]],\n                { 'header': ['enabled', 'value', 'abbr'] })\n                .map(({enabled, value, abbr})=>{\n                        return {enabled, value, abbr}\n                });\n            \n            // checks first row, enabled value and see if it matches header text\n            // normally enabled is a boolean.\n            if((rows[0].enabled.toString()).match(/enabled/i)){\n                setData(rows.slice(1));\n            } else{\n                setData(rows);\n            }\n            \n        };\n        reader.readAsBinaryString(file)\n    }\n    function exportToXLS() {\n        const wb = XLSX.utils.book_new();\n        const sht = XLSX.utils.json_to_sheet(data);\n        XLSX.utils.book_append_sheet(wb, sht, 'abbrs')\n        XLSX.writeFile(wb, 'abbrs.xlsx');\n    }\n    function inputClick() {\n        fileInputRef.current.click();\n    }\n\n\n    return (\n        <div className='toolbox'>\n            <input type=\"file\" onChange={importAbbrs} ref={fileInputRef} style={{ display: \"none\" }}></input>\n            <button className=\"button\" onClick={inputClick}>Import Abbrs</button>\n            <button className=\"button\" onClick={exportToXLS}>Export Abbrs</button>\n            <button className=\"button\" onClick={() => {\n                if (window.confirm(\"Are you sure you want to remove all existing acronyms and replace with a common list?\")) {\n                    importSampleAbbrs();\n                }\n            }}>Load Common Abbrs</button>\n        </div>\n    );\n\n}\n\nfunction AbbrsViewer({ data, setData }) {\n    return (\n        <div>\n            <AbbrTools setData={setData} data={data} />\n            <AbbrTable data={data} setData={setData} />\n        </div>\n    );\n}\n\nexport default AbbrsViewer;\n","import React from \"react\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\"\n\n\nconst handleCardClick = (word, This) => {\n    return (e) => {\n        e.preventDefault();\n        This.props.onSelReplace(word);\n    }\n}\n\nclass SynonymViewer extends React.PureComponent {\n    constructor(props) {\n        super(props)\n        this.state = {\n            synonyms: [],\n            hidden: true,\n        }\n    }\n    getSynonyms = (phrase) => {\n        const xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = () => {\n            if (xhttp.readyState === 4 && xhttp.status === 200) {\n                const dat = JSON.parse(xhttp.responseText);\n\n                if (dat.length !== 0) {\n                    this.setState({\n                        synonyms: dat.map((item) => { return item.word }),\n                    });\n                } else {\n                    this.setState({\n                        synonyms: []\n                    })\n                }\n            }\n        }\n        const maxWords = 75;\n        xhttp.open(\"GET\", \"https://api.datamuse.com/words?max=\" + maxWords + \"&ml=\" + phrase, true)\n        xhttp.send();\n    }\n    componentDidMount() {\n        this.getSynonyms(this.props.word);\n    }\n    componentDidUpdate(prevProps) {\n        if (prevProps.word !== this.props.word) {\n            this.getSynonyms(this.props.word);\n        }\n    }\n\n    render() {\n        const replacedWord = this.props.abbrReplacer(this.props.word);\n        const otherAbbrs = this.props.abbrDict[this.props.word];\n        const header =\n            <span className=\"tag is-medium\">\n                <Synonym word={this.props.word} key={this.props.word}\n                    abbr={replacedWord === this.props.word ? \"\" : replacedWord}\n                    otherAbbrs={otherAbbrs} />\n                <a className=\"icon is-small\" onMouseDown={handleCardClick(this.props.word, this)}>\n                    <FontAwesomeIcon icon={faPlus} size=\"xs\" color=\"#51cf66\" />\n                </a>\n            </span>;\n\n        const synonyms = <SynonymList onSelReplace={this.props.onSelReplace} key={this.state.synonyms.join('')} synonyms={this.state.synonyms} abbrDict={this.props.abbrDict} abbrReplacer={this.props.abbrReplacer} />;\n        const explanation = <span className=\"panel-block\" key='init'>Auto-thesaurus box - highlight a word or phrase below to show synonyms in this box</span>;\n        const noResults = <span className=\"panel-block\" key='none'>no results found</span>;\n        let mainBody;\n        if (this.props.word === '') {\n            mainBody = explanation;\n        } else if (this.state.synonyms.length === 0) {\n            mainBody = noResults;\n        } else {\n            mainBody = synonyms;\n        }\n\n        return (\n            <div className=\"card\">\n                <header className=\"card-header has-background-light\tis-shadowless\">\n                    <div className=\"card-header-title\" >\n                        <span >Thesaurus{this.props.word ? ':' : \"\"}</span>\n                        {this.props.word ? header : ''}\n                    </div>\n                    <a className=\"card-header-icon\" onClick={this.props.onHide}>\n                        <span className=\"delete\">\n                        </span>\n                    </a>\n                </header>\n                <div className=\"card-content\" style={{ height: \"290px\", overflow: \"auto\" }} >\n\n                    {mainBody}\n\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\nclass SynonymList extends React.PureComponent {\n\n    handleCardClick = (word) => {\n        return (e) => {\n            e.preventDefault();\n            this.props.onSelReplace(word);\n\n        }\n    }\n    render() {\n\n        return (\n            <div>\n                <div className=\"tags are-medium \">\n                    {this.props.synonyms.map((word, i) => {\n                        const replacedWord = this.props.abbrReplacer(word);\n                        const otherAbbrs = this.props.abbrDict[word];\n                        return (\n                            <span className='tag' key={i} >\n                                <Synonym word={word}\n                                    abbr={replacedWord === word ? \"\" : replacedWord}\n                                    otherAbbrs={otherAbbrs} />\n                                <a className=\"icon\" onMouseDown={handleCardClick(word, this)}>\n                                    <FontAwesomeIcon icon={faPlus} size=\"xs\" color=\"#51cf66\" />\n                                </a>\n                            </span>\n                        )\n                    }\n                    )}\n                </div>\n            </div>\n        )\n\n    }\n}\nclass Synonym extends React.PureComponent {\n    render() {\n        //don't forget! you need to add capability to check on disabled abbreviations\n        let mainAbbrDisp = '';\n        if (this.props.abbr) {\n            mainAbbrDisp = <span style={{ fontWeight: \"bold\" }}>\n                {\" (\" + this.props.abbr + \")\"}\n            </span>;\n        }\n\n        let enabledAbbrDisp = ''\n        let disabledAbbrDisp = ''\n\n        if (this.props.otherAbbrs) {\n            if (this.props.otherAbbrs.enabled) {\n                let enabledAbbrs = this.props.otherAbbrs.enabled.filter((abbr) => {\n                    return abbr !== this.props.abbr;\n                });\n                if (enabledAbbrs.length > 0) {\n                    enabledAbbrDisp = <span style={{ fontStyle: \"italic\" }}>\n                        {\" (\" + enabledAbbrs.join(',') + \")\"}\n                    </span>\n                }\n            }\n\n            if (this.props.otherAbbrs.disabled) {\n                let disabledAbbrs = this.props.otherAbbrs.disabled;\n                if (disabledAbbrs.length > 0) {\n                    disabledAbbrDisp = <span style={{ fontStyle: \"italic\" }}>\n                        {\" (\" + disabledAbbrs.join(',') + \")\"}\n                    </span>\n                }\n            }\n        }\n        return (\n            <span>\n                <span>{this.props.word}</span>\n                {mainAbbrDisp}\n                {enabledAbbrDisp}\n                {disabledAbbrDisp}\n            </span>\n        )\n    }\n}\nexport default SynonymViewer;\n","import React from \"react\"\nimport BulletComparator from \"./components/BulletComparator.js\"\nimport { Logo, DocumentTools, getSelectionInfo, findWithRegex, tokenize } from \"./components/Tools.js\"\nimport AbbrsViewer from \"./components/Abbrs.js\"\nimport SynonymViewer from \"./components/Thesaurus.js\"\nimport { EditorState, ContentState, Modifier, SelectionState } from \"draft-js\"\n\n\nconst defaultText = '- This is a custom built bullet writing tool; abbreviations will be replaced according to table in the abbreviations tab--you will see output on the right\\n\\\n- This tool can optimize spacing; output will be red if the optimizer could not fix spacing with 2004 or 2006 Unicode spaces\\n\\\n- Click the thesaurus button to show one; select a word in this or the output box to view synonyms--words in parentheses are abbreviations that are configured'\n\nconst defaultWidth = 202.321;\nconst defaultAbbrData = [{\n    enabled: true,\n    value: 'abbreviations',\n    abbr: 'abbrs',\n  }, {\n    enabled: true,\n    value: 'table',\n    abbr: 'tbl',\n  }, {\n    enabled: true,\n    value: 'optimize',\n    abbr: 'optim',\n  }, {\n    enabled: true,\n    value: 'with ',\n    abbr: 'w/',\n  }, {\n    enabled: true,\n    value: 'parentheses',\n    abbr: 'parens',\n  },\n  ];\n\nconst defaultEditorState = EditorState.createWithContent(ContentState.createFromText(defaultText));\n\n// Note that all width measurements in this file are in millimeters.\nfunction BulletApp() {\n\n    const [enableOptim, setEnableOptim] = React.useState(true);\n    const [width, setWidth] = React.useState(defaultWidth);\n    const [abbrData, setAbbrData] = React.useState(defaultAbbrData);\n\n    const [abbrDict, setAbbrDict] = React.useState({});\n\n    const [selection, setSelection] = React.useState('');\n    const [currentTab, setCurrentTab] = React.useState(0);\n    const [showThesaurus, setShowThesaurus] = React.useState(false);\n    const [editorState, setEditorState] = React.useState(defaultEditorState);\n\n    function handleJSONImport(settingsArray) {\n        const settings = settingsArray[0]; //preparing for possible eventual several tabs of stuff\n        setEnableOptim(settings.enableOptim ?? enableOptim);\n\n        // for backwards compatibility\n        setWidth(parseFloat(settings.width ?? width));\n        \n        // for backwards compatibility \n        if (Array.isArray(settings.abbrData[0])){\n            setAbbrData(settings.abbrData.map((row) => {\n                return {\n                    enabled: row[0],\n                    value: row[1],\n                    abbr: row[2],\n                    };\n                }));\n        }else{\n            setAbbrData(settings.abbrData ?? abbrData);\n        }\n        \n        \n\n        setEditorState(\n            settings.editorState ? EditorState.fromJS(settings.editorState) :\n                EditorState.createWithContent(ContentState.createFromText(settings.text))\n        );\n    }\n\n    React.useEffect(() => {\n\n        let settingsArray;\n        try {\n\n            if (localStorage.getItem('bullet-settings')) {\n                settingsArray = JSON.parse(localStorage.getItem(\"bullet-settings\"));\n                handleJSONImport(settingsArray);\n            }\n        } catch (err) {\n            if (err.name === 'SecurityError') {\n                console.log('Was not able to get localstorage bullets due to use of file interface and browser privacy settings');\n            } else {\n                throw err;\n            }\n        }\n\n    }, [])\n\n    React.useEffect(() => {\n        const newAbbrDict = {};\n        abbrData.filter((row) => row.value !== null && row.abbr !== null ).forEach((row) => {\n            let fullWord = String(row.value).replace(/\\s/g, ' ');\n            let abbr = row.abbr;\n            let enabled = row.enabled;\n            newAbbrDict[fullWord] = newAbbrDict[fullWord] || []; //initializes to empty array if necessary\n\n            if (enabled) {\n                newAbbrDict[fullWord].enabled = newAbbrDict[fullWord].enabled || [];\n                newAbbrDict[fullWord].enabled.push(abbr)\n            } else {\n                newAbbrDict[fullWord].disabled = newAbbrDict[fullWord].disabled || [];\n                newAbbrDict[fullWord].disabled.push(abbr)\n            }\n        })\n\n        setAbbrDict(newAbbrDict);\n    }, [abbrData]);\n\n    const abbrReplacer = React.useCallback((sentence) => {\n\n        const finalAbbrDict = {};\n        Object.keys(abbrDict).forEach(\n            (word) => {\n                const abbrs = abbrDict[word]; //an array\n                //if there is at least one enabled abbreviation, take the lowest most element of it.\n                if (abbrs.enabled) {\n                    finalAbbrDict[word] = abbrs.enabled[abbrs.enabled.length - 1];\n                }\n            }\n        )\n\n        // courtesy of https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex \n        function escapeRegExp(string) {\n            return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n        }\n\n        let modifiers = 'g';\n        const allApprovedAbbrs = Object.keys(finalAbbrDict).map(escapeRegExp).join('|');\n\n        // some info on the boundary parts of the regex:\n        // (^|\\\\W|\\\\b) \n        //     ^ - ensures words at the beginning of line are considered for abbreviation\n        //     \\\\W - expects abbr to be preceded by a non-word, i.e. a space, semicolon, dash, etc.\n        //     \\\\b - also check for word boundaries, this is necessary for edge cases like 'f/ ' and 'w/ '.\n        //            Otherwise things like 'with chicken' and 'for $2M' won't resolve to 'w/chicken' and 'f/$2M'.\n        // (\\\\W|\\\\b|$)\n        //     \\\\W, \\\\b - see above\n        //     $ - ensures words at end of line are considered for abbreviation\n        const regExp = new RegExp(\"(^|\\\\W|\\\\b)(\" + allApprovedAbbrs + \")(\\\\W|\\\\b|$)\", modifiers);\n        const newSentence = sentence.replace(regExp,\n            (match, p1, p2, p3) => {\n                //p2 = p2.replace(/ /g,'\\\\s')\n                let abbr = finalAbbrDict[p2];\n                if (!abbr) {\n                    abbr = '';\n                }\n                return p1 + abbr + p3;\n            }\n        );\n        return newSentence;\n    }\n        , [abbrDict])\n\n\n    function handleOptimChange() {\n        setEnableOptim(!enableOptim);\n    }\n    function handleSelect(newSel) {\n        const maxWords = 8;\n        if (newSel.trim() !== '') {\n            setSelection(tokenize(newSel.trim()).slice(0, maxWords).join(' '));\n        }\n\n    }\n\n    function handleWidthChange(e) {\n        setWidth(parseFloat(e.target.value))\n    }\n    function handleTextNorm() {\n\n        const selectionsToReplace = [];\n        const contentState = editorState.getCurrentContent();\n        contentState.getBlockMap().forEach((block, key) => {\n            findWithRegex(/\\s+/g, block, (anchorOffset, focusOffset) => {\n                const selection = SelectionState.createEmpty(key).merge({ anchorOffset, focusOffset });\n                selectionsToReplace.push(selection);\n            });\n        });\n\n        let newContentState = contentState;\n        // need to reverse the selections list, because otherwise as the newContentState is iteratively changed, \n        //  subsequent selections will get shifted and get all jacked up. This problem can be avoided by going backwards.\n        selectionsToReplace.reverse().forEach(selection => {\n            newContentState = Modifier.replaceText(newContentState, selection, ' ');\n        });\n\n        setEditorState(EditorState.createWithContent(newContentState));\n\n\n    }\n    function handleTextUpdate(newText) {\n        return () => setEditorState(EditorState.createWithContent(ContentState.createFromText(newText)));\n    }\n    function handleWidthUpdate(newWidth) {\n        return () => setWidth(newWidth);\n    }\n    function handleSave() {\n\n        return {\n            width: width,\n            text: editorState.getCurrentContent().getPlainText('\\n'),\n            editorState: editorState.toJS(),\n            abbrData: abbrData,\n            enableOptim: enableOptim,\n        }\n    }\n    function handleTabChange(newTab) {\n        return () => setCurrentTab(newTab);\n    }\n    function handleThesaurusHide() {\n        setShowThesaurus(!showThesaurus)\n    }\n    function handleSelReplace(word) {\n\n        if (document.activeElement.className.match(/public-DraftEditor-content/)) {\n\n            const { selectedText, start, anchorKey, selectionState } = getSelectionInfo(editorState);\n\n            const trailingSpaces = selectedText.match(/\\s*$/)[0];\n            const newEnd = start + word.length + trailingSpaces.length;\n\n            const newSelectionState = SelectionState.createEmpty(anchorKey).merge({\n                anchorOffset: start,\n                focusOffset: newEnd,\n            })\n\n            const newContent = Modifier.replaceText(editorState.getCurrentContent(), selectionState, word + trailingSpaces);\n            const newEditorState = EditorState.push(editorState, newContent, 'insert-characters');\n            const newEditorStateSelect = EditorState.forceSelection(newEditorState, newSelectionState);\n\n            setEditorState(newEditorStateSelect);\n        };\n    }\n\n    const tabs = ['Bullets', 'Abbreviations'];\n    const tabContents = [\n        <BulletComparator\n            editorState={editorState}\n            setEditorState={setEditorState}\n            abbrReplacer={abbrReplacer}\n            width={width}\n            onSelect={handleSelect} enableOptim={enableOptim} />,\n        <AbbrsViewer\n            data={abbrData}\n            setData={setAbbrData} />\n    ];\n\n    return (\n\n        <div className=\"container is-fluid\">\n            <div className='columns is-multiline'>\n                <div className='column is-full'>\n                    <Logo />\n                    <DocumentTools\n                        enableOptim={enableOptim}\n                        onOptimChange={handleOptimChange}\n                        width={width} onWidthChange={handleWidthChange}\n                        onWidthUpdate={handleWidthUpdate}\n                        onTextNorm={handleTextNorm}\n                        onTextUpdate={handleTextUpdate}\n                        onSave={handleSave}\n                        onJSONImport={handleJSONImport}\n                        onThesaurusHide={handleThesaurusHide}\n                    />\n                </div>\n\n                <div className={'column is-full ' + (showThesaurus ? \"\" : \"is-hidden\")}>\n                    <SynonymViewer word={selection} onSelReplace={handleSelReplace} abbrDict={abbrDict} abbrReplacer={abbrReplacer}\n                        onHide={handleThesaurusHide} />\n                </div>\n                <div className=\"column is-full\">\n                    <div className=\"tabs\">\n                        <ul>\n                            {tabs.map((tab, i) => {\n                                return (\n                                    <li key={i} className={currentTab === i ? \"is-active\" : ''} ><a onClick={handleTabChange(i)}>{tab}</a></li>\n                                )\n                            }\n                            )}\n                        </ul>\n                    </div>\n                </div>\n                <div className='column is-full'>\n                    {tabContents[currentTab]}\n                </div>\n            </div>\n        </div>\n\n    );\n}\n\nexport default BulletApp;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n\n//import {Bullet, BulletComparator, Skeleton} from \"./components/bullets.js\"\nimport BulletApp from \"./BulletApp.js\"\n\nimport \"./styles/index.scss\"\nimport 'handsontable/dist/handsontable.full.css'\n\nimport * as serviceWorker from './serviceWorker';\nimport WebFont from 'webfontloader';\n\n\n\nWebFont.load({\n  custom: {\n    families: ['AdobeTimes']\n  }\n});\n\n\n\n\nReactDOM.render(\n  <>\n    <div className=\"section\" id=\"stuff\" >\n      <BulletApp  />\n    </div>\n    <div className=\"container\" id=\"footer\">\n      <div>If you have feedback, submit\n          an <a href='https://github.com/AF-VCD/pdf-bullets/issues'>issue</a>\n          or a <a href=\"https://github.com/AF-VCD/pdf-bullets/pulls\">pull request</a>\n      </div>\n      <div>This site utilizes PDF.JS (pdf import), react-table (spreadsheet), draft-js (editor), the DataMuse API (thesaurus), and Bulma (CSS).</div>\n      <div>This site has basic analytics to track the total number of visits to the page. See <a href=\"https://github.com/ckhordiasma/log-bullet-visitors\">here</a> for details</div>\n      <div>Maintained by Christopher Kodama </div>\n    </div>\n  </>\n  , document.getElementById('root'));\n\nincrementVisitors();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n\nfunction incrementVisitors() {\n  // code for incrementing visitor count    \n  const xh = new XMLHttpRequest();\n  xh.onreadystatechange = () => {\n    if (xh.readyState === XMLHttpRequest.DONE) {\n      var status = xh.status;\n\n      // Not sure what status codes are acceptable.. using MDN successful responses and redirects range as a guide\n      if ((status >= 200 && status < 400)) {\n        // The request has been completed successfully\n        const count = JSON.parse(xh.response).Count;\n        console.log(\"The bullets site(s) have been visited \" + count + \" times in the last 7 days.\");\n\n      } else {\n        console.log(\"Visitor count increment: task failed successfully\");\n      }\n    }\n  }\n  xh.open(\"POST\", \"https://g5z50elklh.execute-api.us-east-2.amazonaws.com/default/LogVisitors\", true);\n  xh.send();\n}"],"sourceRoot":""}